services:
  weaviate:
    image: semitechnologies/weaviate:latest
    platform: linux/arm64
    ports:
      - "${WEAVIATE_PORT:-8080}:8080"  # HTTP REST API
      - "${WEAVIATE_GRPC_PORT:-50051}:50051"  # gRPC API (required for v4 client)
    environment:
      QUERY_DEFAULTS_LIMIT: 25
      AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'
      PERSISTENCE_DATA_PATH: '/var/lib/weaviate'
      ENABLE_MODULES: 'text2vec-huggingface'
      HUGGINGFACE_APIKEY: ${HUGGINGFACE_APIKEY:-}  # Load from .env file
    env_file:
      - .env  # Load environment variables from .env file
